edition: 3.0.0
name: camel-insemination-app
access: "default"

resources:
  insemination-handler:
    component: fc3
    props:
      region: "me-central-1"
      functionName: "insemination-handler"
      handler: "index.handler"
      description: "Function to process camel insemination lifecycle."
      runtime: "nodejs18"
      timeout: 60
      code: ./
      
      environmentVariables:
        ALIYUN_ACCESS_KEY_ID: "ACCESS_KEY_ID_PLACEHOLDER"
        ALIYUN_ACCESS_KEY_SECRET: "ACCESS_KEY_SECRET_PLACEHOLDER"
        MNS_ACCOUNT_ID: "MNS_ACCOUNT_ID_PLACEHOLDER"
        MNS_REGION: "me-central-1"
        MNS_QUEUE_NAME: "MNS_QUEUE_NAME_PLACEHOLDER"
        FCM_CREDENTIALS_JSON: "FCM_CREDENTIALS_JSON_PLACEHOLDER"
        MONGO_URI: "MONGO_URI_PLACEHOLDER"
        MONGO_DBNAME: "MONGO_DBNAME_PLACEHOLDER"

      triggers:
        - triggerName: on-insemination-event
          triggerType: mns_topic
          config:
            queueName: "insemination-processing-queue"
            notifyContentFormat: "JSON"
            notifyStrategy: "BACKOFF_RETRY"