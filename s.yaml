edition: 3.0.0
name: camel-insemination-app
access: "default"

resources:
  insemination-handler:
    component: fc3
    props:
      region: "me-central-1"
      functionName: "insemination-handler"
      description: "Function to process camel insemination lifecycle."
      runtime: "nodejs18"
      handler: "index.sendMessage"
      timeout: 60
      code: ./
      
      environmentVariables:
        # These values are now securely provided by the GitHub Actions runner
        ALIYUN_ACCESS_KEY: "${env.ALIYUN_ACCESS_KEY_ID}"
        ALIYUN_SECRET_KEY: "${env.ALIYUN_ACCESS_KEY_SECRET}"
        MNS_ACCOUNT_ID: "${env.MNS_ACCOUNT_ID}"
        MNS_REGION: "me-central-1"
        MNS_QUEUE_NAME: "${env.MNS_QUEUE_NAME}"
        FCM_CREDENTIALS_JSON: "${env.FCM_CREDENTIALS_JSON}"
        MONGO_URI: "${env.MONGO_URI}"
        MONGO_DBNAME: "${env.MONGO_DBNAME}"